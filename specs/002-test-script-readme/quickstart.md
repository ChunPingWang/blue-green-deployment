# 快速開始指南：測試腳本與專案文件

**功能分支**: `002-test-script-readme`
**日期**: 2025-12-04

## 前置需求

在開始之前，請確認您的環境已安裝以下工具：

| 工具 | 最低版本 | 檢查指令 | 用途 |
|------|----------|----------|------|
| Bash | 4.0+ | `bash --version` | 執行測試腳本 |
| curl | 任意版本 | `curl --version` | 發送 HTTP 請求 |

## 快速驗證

### 步驟 1：確認微服務已啟動

確保藍綠佈署的三個微服務都已啟動：
- API Gateway (port 8080)
- Blue Service (port 8081)
- Green Service (port 8082)

### 步驟 2：執行測試腳本

```bash
# 使用預設參數（100 次請求）
./scripts/test-traffic.sh

# 指定請求次數
./scripts/test-traffic.sh 50
```

### 步驟 3：檢視結果

腳本會顯示類似以下的輸出：

```text
🔵 測試藍綠佈署流量分配
━━━━━━━━━━━━━━━━━━━━━━━━
端點: http://localhost:8080/greeting
請求次數: 100

執行中... [████████████████████] 100%

📊 結果統計
━━━━━━━━━━━━━━━━━━━━━━━━
🔵 Blue Service:  20 次 (20.0%)
🟢 Green Service: 80 次 (80.0%)
❌ 失敗:           0 次 (0.0%)
━━━━━━━━━━━━━━━━━━━━━━━━
總計: 100 次 | 耗時: 5.2 秒
```

## 預期結果

- 藍色服務應收到約 20% 的流量
- 綠色服務應收到約 80% 的流量
- 允許 ±5% 的統計誤差

## 常見問題

### 問題：無法連線到 API 閘道

**錯誤訊息**: `❌ 錯誤：無法連線到 API 閘道`

**解決方案**:
1. 確認 API Gateway 服務已啟動
2. 檢查端口 8080 是否正確
3. 確認沒有防火牆阻擋

### 問題：流量分配比例不符預期

**可能原因**:
- 請求次數太少（建議至少 100 次）
- 後端服務有一個未正常運作

**解決方案**:
1. 增加請求次數到 500 或 1000
2. 檢查兩個後端服務的運作狀態

## 下一步

- 閱讀專案 README.md 了解更多架構細節
- 嘗試調整閘道的權重設定觀察流量變化
