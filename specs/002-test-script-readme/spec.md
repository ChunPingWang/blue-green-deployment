# 功能規格書：測試腳本與專案文件

**功能分支**: `002-test-script-readme`
**建立日期**: 2025-12-04
**狀態**: 草稿
**輸入**: 使用者描述: "加入測試用 shell script，呼叫 api gateway，呈現回覆結果展示兩個微服務的流量差異；最後將這個專案狀況寫到 README.md，加入使用說明與教學"

## 使用者情境與測試 *(必填)*

### 使用者故事 1 - 執行流量測試腳本 (優先級: P1)

作為一個開發人員或展示者，我希望能夠執行一個測試腳本，自動對 API 閘道發送多次請求，並以視覺化的方式呈現藍色服務和綠色服務的流量分配結果，讓我能夠快速驗證藍綠佈署的流量分配是否正常運作。

**優先級原因**: 這是展示藍綠佈署效果的核心工具，沒有這個腳本，使用者很難快速驗證和展示流量分配的效果。

**獨立測試**: 可透過執行腳本並觀察輸出結果，確認腳本能正確統計並顯示來自不同服務的回應次數和比例。

**驗收情境**:

1. **假設** 所有微服務都已啟動且運作正常，**當** 使用者執行測試腳本，**則** 腳本發送預設數量的請求並顯示每個服務收到的請求統計
2. **假設** 所有微服務都已啟動，**當** 使用者執行測試腳本並指定請求次數，**則** 腳本依照指定次數發送請求並顯示統計結果
3. **假設** 測試腳本執行完成，**當** 使用者查看輸出結果，**則** 結果清楚顯示藍色服務和綠色服務各收到的請求數量與百分比

---

### 使用者故事 2 - 閱讀專案說明文件 (優先級: P2)

作為一個新加入專案的開發人員或對藍綠佈署有興趣的學習者，我希望能夠閱讀專案的 README 文件，了解專案的目的、架構、如何啟動服務以及如何執行測試，讓我能夠快速上手並理解這個展示專案。

**優先級原因**: 良好的文件是專案可用性的重要基礎，但相較於測試腳本，文件可以在腳本完成後補充。

**獨立測試**: 可透過讓一個不熟悉專案的人閱讀 README 並按照指示操作，驗證文件的完整性和清晰度。

**驗收情境**:

1. **假設** 使用者開啟 README.md 文件，**當** 使用者閱讀專案簡介，**則** 使用者能理解這是一個藍綠佈署展示專案
2. **假設** 使用者按照 README 中的啟動指示操作，**當** 使用者完成所有步驟，**則** 所有微服務都能成功啟動
3. **假設** 使用者按照 README 中的測試指示操作，**當** 使用者執行測試腳本，**則** 使用者能看到流量分配的結果

---

### 使用者故事 3 - 了解專案架構 (優先級: P3)

作為一個想要學習藍綠佈署概念的開發人員，我希望 README 文件包含專案架構的說明，讓我能夠理解各個微服務之間的關係和流量分配的原理。

**優先級原因**: 架構說明有助於深入理解，但對於基本使用而言不是必要的。

**獨立測試**: 可透過閱讀架構說明部分，驗證是否清楚解釋了閘道和兩個後端服務的關係。

**驗收情境**:

1. **假設** 使用者閱讀 README 的架構章節，**當** 使用者讀完架構說明，**則** 使用者能夠畫出或描述三個微服務之間的關係

---

### 邊界案例

- 當某個微服務未啟動時，測試腳本應顯示錯誤訊息並說明哪個服務無法連線
- 當使用者指定無效的請求次數（如負數或非數字）時，腳本應顯示使用說明
- 當閘道服務未啟動時，腳本應提供清楚的錯誤提示
- 當網路延遲導致請求逾時時，腳本應記錄失敗的請求數量

## 需求 *(必填)*

### 功能需求

- **FR-001**: 系統必須提供一個測試腳本，可以對閘道發送指定數量的請求
- **FR-002**: 測試腳本必須統計來自藍色服務和綠色服務的回應數量
- **FR-003**: 測試腳本必須顯示每個服務的回應比例（百分比）
- **FR-004**: 測試腳本必須支援自訂請求次數的參數
- **FR-005**: 測試腳本必須在執行結束後顯示摘要報告
- **FR-006**: README.md 必須包含專案簡介，說明這是藍綠佈署展示專案
- **FR-007**: README.md 必須包含前置需求說明（執行環境要求）
- **FR-008**: README.md 必須包含服務啟動的步驟說明
- **FR-009**: README.md 必須包含測試腳本的使用說明
- **FR-010**: README.md 必須包含專案架構圖或架構說明

### 關鍵實體

- **測試腳本 (Test Script)**: 自動化測試工具，負責發送請求、收集回應、統計結果並呈現報告。主要屬性包含請求次數、目標端點、統計數據。
- **README 文件**: 專案的入口文件，包含專案說明、使用指南、架構說明等資訊。
- **統計報告**: 測試腳本的輸出結果，包含各服務的請求數量、比例、成功/失敗統計。

## 成功標準 *(必填)*

### 可衡量的成果

- **SC-001**: 測試腳本能在 30 秒內完成 100 次請求的測試並顯示結果
- **SC-002**: 測試腳本的統計結果與實際流量分配的誤差不超過 2%（在樣本量足夠大的情況下）
- **SC-003**: 一個不熟悉專案的開發人員能在閱讀 README 後 10 分鐘內成功啟動所有服務
- **SC-004**: 一個不熟悉專案的開發人員能在閱讀 README 後 5 分鐘內成功執行測試腳本
- **SC-005**: README 文件涵蓋至少 5 個主要章節（簡介、前置需求、啟動說明、測試說明、架構說明）

## 釐清事項

### 會議紀錄 2025-12-04

- Q: API 閘道的預設端點為何？ → A: `http://localhost:8080/greeting` (本地開發預設)

## 假設

- 測試腳本將使用命令列工具執行，假設使用者具備基本的終端機操作能力
- API 閘道預設運行於 `http://localhost:8080`，greeting 端點路徑為 `/greeting`
- README 文件使用繁體中文撰寫，符合專案憲法的文件語言規範
- 測試腳本預設發送 100 次請求，但可透過參數調整
- 測試腳本的輸出格式為純文字，易於在終端機閱讀
- 假設使用者的執行環境已安裝基本的命令列工具（如 curl）
